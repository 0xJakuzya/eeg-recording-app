# EEG / EMG Recording App

Мобильное приложение для регистрации ЭЭГ-сигналов с 8-канальных BLE-устройств. Обеспечивает подключение по Bluetooth Low Energy, приём и визуализацию данных в реальном времени, а также потоковую запись сигналов в CSV-файлы с защитой от потери данных. Поддерживается одновременная работа от 1 до 8 каналов и настройка параметров записи

## Основные возможности

- **Подключение к BLE‑устройствам** — сканирование и подключение к кастомным EEG/EMG BLE‑устройствам
- **Запись данных в реальном времени** — потоковая запись данных в CSV‑файлы с буферизацией и защитой от потери данных
- **Визуализация сигналов** — отображение сигналов в реальном времени с поддержкой скользящего окна и регулировкой масштаба амплитуды
- **Поддержка множественных каналов** — запись и визуализация от 1 до 8 каналов одновременно (число каналов задаётся в настройках)
- **Фильтрация для EMG/EEG** — простая полосовая фильтрация для визуализации (частоты задаются в `RecordingConstants`)
- **Управление файлами** — просмотр и управление записанными CSV‑файлами
- **Настройки** — конфигурация количества каналов и директории сохранения записей

## Архитектура приложения

```
EEG / EMG Device (BLE)
    ↓ 
BleController (Subscribe)
    ↓ 
EegParserService (Bytes → EegSample, counter + 1 bytes/channel)
    ↓
CsvStreamWriter (Append + Periodic Flush)
    ↓ 
File Storage (/Documents/)
```

## Установка и запуск

1. Убедитесь, что у вас установлен Flutter SDK (3.10.7+)
2. Установите зависимости:
   ```bash
   flutter pub get
   ```
3. Запустите приложение:
   ```bash
   flutter run
   ```

## Структура проекта

```
lib/
├── controllers/          # управление состоянием 
│   ├── ble_controller.dart          # ble подключение и сканирование
│   ├── recording_controller.dart   # управление записью данных
│   └── settings_controller.dart     # настройки приложения
├── services/             # бизнес-логика
│   ├── csv_stream_service.dart     # потоковая запись в CSV
│   └── eeg_parser_service.dart      # парсинг BLE байтов
├── models/               # модели данных
│   └── eeg_sample.dart              # модель сэмпла EEG
├── views/                # UI страницы
│   ├── connection_page.dart         # подключение к устройствам
│   ├── recording_page.dart          # запись и визуализация
│   ├── files_page.dart              # управление файлами
│   └── settings_page.dart           # настройки
├── widgets/              # виджеты
│   ├── eeg_plots.dart               # графики сигналов
│   └── recording_status_card.dart   # статус записи
└── core/                 # константы и конфигурация
    ├── ble_constants.dart
    └── recording_constants.dart
```

